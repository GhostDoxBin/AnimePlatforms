<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å | –ê–Ω–∏–º–µ–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="theme.css">
    <link rel="stylesheet" href="admin.css">
</head>
<body data-theme="dark">
    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <a href="index.html" class="logo">–ê–Ω–∏–º–µ<span>–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞</span></a>
                <nav>
                    <ul>
                        <li><a href="index.html">–ì–ª–∞–≤–Ω–∞—è</a></li>
                        <li><a href="catalog.html">–ö–∞—Ç–∞–ª–æ–≥</a></li>
                        <li><a href="player.html">–ü–ª–µ–µ—Ä</a></li>
                        <li><a href="ratings.html">–†–µ–π—Ç–∏–Ω–≥–∏</a></li>
                        <li><a href="admin.html" class="active">–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</a></li>
                    </ul>
                </nav>
                
                <div class="header-controls">
                    <button id="theme-toggle" class="btn-theme">üåô</button>
                    <div class="auth-buttons">
                        <!-- –ë—É–¥–µ—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–æ —á–µ—Ä–µ–∑ JavaScript -->
                    </div>
                    <div id="admin-profile-controls" style="display: none;">
                        <a href="profile.html" class="btn btn-profile" id="admin-profile-btn">
                            <img src="" alt="–ê–≤–∞—Ç–∞—Ä" class="profile-avatar" id="admin-avatar">
                            <span class="profile-username" id="admin-username">–ü—Ä–æ—Ñ–∏–ª—å</span>
                        </a>
                        <button class="btn btn-login" id="admin-logout-btn">–í—ã–π—Ç–∏</button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Admin Panel -->
    <section class="admin-section">
        <div class="container">
            <div class="admin-panel" id="admin-panel">
                <div class="admin-header">
                    <h1>–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å</h1>
                    <div class="admin-info">
                        <div class="admin-details">
                            <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–µ</h3>
                            <p><strong>–ò–º—è:</strong> <span id="admin-name"></span></p>
                            <p><strong>–£—Ä–æ–≤–µ–Ω—å:</strong> <span id="admin-level"></span></p>
                            <p><strong>Email:</strong> <span id="admin-email"></span></p>
                        </div>
                        <div class="admin-permissions">
                            <h3>–í–∞—à–∏ –ø—Ä–∞–≤–∞</h3>
                            <ul id="admin-permissions">
                                <!-- Permissions will be loaded by JavaScript -->
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="admin-tabs">
                    <button class="admin-tab active" data-tab="anime" id="anime-tab">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–Ω–∏–º–µ</button>
                    <button class="admin-tab" data-tab="users" id="users-tab">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</button>
                    <button class="admin-tab" data-tab="stats" id="stats-tab">–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
                </div>

                <!-- Anime Management Tab -->
                <div class="tab-content active" id="anime-content">
                    <div class="tab-header">
                        <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–Ω–∏–º–µ</h2>
                        <button class="btn btn-primary" id="add-anime-btn">–î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∏–º–µ</button>
                    </div>
                    
                    <div class="table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                                    <th>–†–µ–π—Ç–∏–Ω–≥</th>
                                    <th>–ì–æ–¥</th>
                                    <th>–ñ–∞–Ω—Ä</th>
                                    <th>–°—Ç–∞—Ç—É—Å</th>
                                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody id="anime-list">
                                <!-- Anime list will be loaded by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Users Management Tab -->
                <div class="tab-content" id="users-content">
                    <div class="tab-header">
                        <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h2>
                        <div class="search-box">
                            <input type="text" id="search-users" placeholder="–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...">
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <table class="admin-table">
                            <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</th>
                                    <th>Email</th>
                                    <th>–†–æ–ª—å</th>
                                    <th>–£—Ä–æ–≤–µ–Ω—å –∞–¥–º–∏–Ω–∞</th>
                                    <th>–î–µ–π—Å—Ç–≤–∏—è</th>
                                </tr>
                            </thead>
                            <tbody id="users-list">
                                <!-- Users list will be loaded by JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Statistics Tab -->
                <div class="tab-content" id="stats-content">
                    <div class="tab-header">
                        <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã</h2>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                            <button class="btn btn-primary" id="quick-sync-btn">‚ö° –ë—ã—Å—Ç—Ä–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</button>
                            <button class="btn btn-secondary" id="export-data-btn">üì• –≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
                            <button class="btn btn-secondary" id="import-data-btn">üì§ –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</button>
                            <input type="file" id="import-file-input" accept=".json" style="display: none;">
                        </div>
                        <div id="sync-qr-container" style="display: none; margin-top: 20px; text-align: center; padding: 20px; background: var(--bg-secondary); border-radius: 8px;">
                            <h3 style="margin-bottom: 15px; color: var(--text-primary);">üì± –°–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ</h3>
                            <img id="sync-qr-image" src="" alt="QR –∫–æ–¥" style="max-width: 300px; border-radius: 8px; margin-bottom: 15px;">
                            <p style="color: var(--text-secondary); margin-bottom: 10px; word-break: break-all; font-size: 12px;" id="sync-link-text"></p>
                            <button class="btn btn-secondary" id="copy-sync-link-btn">üìã –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å—Å—ã–ª–∫—É</button>
                            <button class="btn btn-secondary" id="close-sync-modal-btn" style="margin-left: 10px;">‚úï –ó–∞–∫—Ä—ã—Ç—å</button>
                        </div>
                    </div>
                    
                    <div class="stats-grid">
                        <div class="stat-card">
                            <div class="stat-icon">üìä</div>
                            <div class="stat-value" id="total-anime">0</div>
                            <div class="stat-label">–í—Å–µ–≥–æ –∞–Ω–∏–º–µ</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üë•</div>
                            <div class="stat-value" id="total-users">0</div>
                            <div class="stat-label">–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">‚≠ê</div>
                            <div class="stat-value" id="avg-rating">0.0</div>
                            <div class="stat-label">–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üëë</div>
                            <div class="stat-value" id="total-admins">0</div>
                            <div class="stat-label">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤</div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 30px; padding: 20px; background: var(--bg-secondary); border-radius: 8px; border: 1px solid var(--border-color);">
                        <h3 style="margin-bottom: 15px; color: var(--text-primary);">‚ö° –ë—ã—Å—Ç—Ä–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 15px;">
                            <strong>–ù–æ–≤—ã–π —Å–ø–æ—Å–æ–±:</strong> –ù–∞–∂–º–∏—Ç–µ "–ë—ã—Å—Ç—Ä–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è" –∏ –æ—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥ –Ω–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ. –î–∞–Ω–Ω—ã–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!
                        </p>
                        <p style="color: var(--text-secondary); margin-bottom: 10px;">
                            <strong>–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Å–ø–æ—Å–æ–±:</strong> –≠–∫—Å–ø–æ—Ä—Ç/–ò–º–ø–æ—Ä—Ç —á–µ—Ä–µ–∑ —Ñ–∞–π–ª
                        </p>
                        <ol style="color: var(--text-secondary); margin-left: 20px; line-height: 1.8; font-size: 14px;">
                            <li>–ù–∞ –ü–ö: –Ω–∞–∂–º–∏—Ç–µ "–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö" –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ —Ñ–∞–π–ª</li>
                            <li>–ù–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–µ: –æ—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –∏ –Ω–∞–∂–º–∏—Ç–µ "–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö"</li>
                            <li>–í—ã–±–µ—Ä–∏—Ç–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π —Ñ–∞–π–ª</li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Anime Form Modal -->
    <div class="modal-overlay" id="anime-form">
        <div class="modal">
            <button class="close-modal" id="close-anime-form-btn">&times;</button>
            <div class="modal-content">
                <h2 id="form-title">–î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∏–º–µ</h2>
                <form id="anime-form-data">
                    <input type="hidden" id="anime-id">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="anime-title">–ù–∞–∑–≤–∞–Ω–∏–µ *</label>
                            <input type="text" id="anime-title" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="anime-rating">–†–µ–π—Ç–∏–Ω–≥ *</label>
                            <input type="number" id="anime-rating" class="form-input" min="0" max="10" step="0.1" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="anime-year">–ì–æ–¥ *</label>
                            <input type="number" id="anime-year" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="anime-episodes">–≠–ø–∏–∑–æ–¥—ã *</label>
                            <input type="number" id="anime-episodes" class="form-input" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="anime-genre">–ñ–∞–Ω—Ä *</label>
                            <select id="anime-genre" class="form-input" required>
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∂–∞–Ω—Ä</option>
                                <option value="–°—ë–Ω–µ–Ω">–°—ë–Ω–µ–Ω</option>
                                <option value="–î—Ä–∞–º–∞">–î—Ä–∞–º–∞</option>
                                <option value="–§—ç–Ω—Ç–µ–∑–∏">–§—ç–Ω—Ç–µ–∑–∏</option>
                                <option value="–†–æ–º–∞–Ω—Ç–∏–∫–∞">–†–æ–º–∞–Ω—Ç–∏–∫–∞</option>
                                <option value="–ö–æ–º–µ–¥–∏—è">–ö–æ–º–µ–¥–∏—è</option>
                                <option value="–£–∂–∞—Å—ã">–£–∂–∞—Å—ã</option>
                                <option value="–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è">–ü—Ä–∏–∫–ª—é—á–µ–Ω–∏—è</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="anime-status">–°—Ç–∞—Ç—É—Å *</label>
                            <select id="anime-status" class="form-input" required>
                                <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç–∞—Ç—É—Å</option>
                                <option value="–ó–∞–≤–µ—Ä—à–µ–Ω–æ">–ó–∞–≤–µ—Ä—à–µ–Ω–æ</option>
                                <option value="–û–Ω–≥–æ–∏–Ω–≥">–û–Ω–≥–æ–∏–Ω–≥</option>
                                <option value="–ê–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞–Ω–æ">–ê–Ω–æ–Ω—Å–∏—Ä–æ–≤–∞–Ω–æ</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="anime-studio">–°—Ç—É–¥–∏—è</label>
                        <input type="text" id="anime-studio" class="form-input">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label" for="anime-description">–û–ø–∏—Å–∞–Ω–∏–µ</label>
                        <textarea id="anime-description" class="form-input" rows="4"></textarea>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="anime-poster">–ü–æ—Å—Ç–µ—Ä (URL)</label>
                            <input type="url" id="anime-poster" class="form-input">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="anime-video">–í–∏–¥–µ–æ (URL)</label>
                            <input type="url" id="anime-video" class="form-input">
                        </div>
                    </div>
                    
                    <div class="form-group" id="episodes-container">
                        <!-- –≠–ø–∏–∑–æ–¥—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                    </div>
                    
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancel-anime-btn">–û—Ç–º–µ–Ω–∞</button>
                        <button type="button" class="btn btn-primary" id="save-anime-btn">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —É—Ç–∏–ª–∏—Ç—ã -->
    <script src="config.js"></script>
    <script src="utils/error-handler.js"></script>
    <script src="utils/helpers.js"></script>
    
    <!-- –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã -->
    <script src="components/Notification.js"></script>
    
    <!-- –°–µ—Ä–≤–∏—Å—ã -->
    <script src="services/auth-service.js"></script>
    <script src="services/anime-service.js"></script>
    <script src="services/anime-api.js"></script>
    <script src="sync-service.js"></script>
    
    <!-- –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Å–∫—Ä–∏–ø—Ç—ã (–¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏) -->
    <script src="database.js"></script>
    <script src="anime-data.js"></script>
    <script src="auth.js"></script>
    <script src="theme.js"></script>
    <script src="admin.js"></script>
</body>
</html>